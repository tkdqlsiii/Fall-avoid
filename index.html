<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Gamedev Canvas Workshop</title>
    <style>
    	* { padding: 0; margin: 0; background-image: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);}
    	canvas { background: #eee; display: block; margin: 0 auto; }
        
    </style>
</head>
<body>

<canvas id="myCanvas" width="480" height="720"></canvas>

<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

var x = canvas.width/2; //공의 x위치
var y = canvas.height-300; //공의 y위치
var dx = 0;  //프레임마다 움직이는 x축 거리
var dy = -4;  //프레임마다 움직이는 y축 거리
var ballRadius = 10;  //공 둘레 함수
var rightPressed = false;//오른쪽 컨트롤 버튼 초기화
var leftPressed = false;//왼쪽 컨트롤 버튼 초기화


document.addEventListener("keydown", keyDownHandler, false);//키를 누르면 함수시작
document.addEventListener("keyup", keyUpHandler, false);//키를 때면 함수시작

function keyDownHandler(e) { //키를 누르면 e변수에 저장
    if(e.keyCode == 39) {//오른쪽 방향키
        rightPressed = true;
    }
    else if(e.keyCode == 37) {//왼쪽 방향키
        leftPressed = true;
    }
}

function keyUpHandler(e) { //키를 때면 e변수에 저장
    if(e.keyCode == 39) {//오른쪽 방향키
        rightPressed = false;
    }
    else if(e.keyCode == 37) {//왼쪽 방향키
        leftPressed = false;
    }
}

function drawBall() { // 프레임마다 변수 갱신 함수
    ctx.beginPath();
    if(rightPressed) {
    x += 3;
    }
    else if(leftPressed) {
    x -= 3;
    }
    ctx.arc(x, y, ballRadius, 0, Math.PI*2);//공의 현재 위치 
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}

function draw() {//프레임 진행 함수
    ctx.clearRect(0, 0, canvas.width, canvas.height);//이전 프레임의 공 지우는 함수
    drawBall();
    x += dx;  //프레임당 진행 변수
    y += dy;    //프레임당 진행 변수
    //마지막 스테이지에서는 +로 바궈서 진행 바꿔야 함
    if(y + dy > canvas.height-ballRadius ||/*하단 모서리*/ y + dy/*상단 모서리*/ < ballRadius) {
    dy = -dy;//프레임당 진행 방향 바꿈
    
}
}


setInterval(draw, 10);
</script>

</body>
</html>